{% extends 'BackendLayout/base.html.twig' %}

{% block body %}
    {{ module('sidebar') }}

    <div class="wrapper d-flex flex-column min-vh-100 bg-light dark:bg-transparent">
        <header class="header header-sticky mb-4">
            <div class="container-fluid">
                {{ module('headerimage') }}
            </div>
            <div class="header-divider"></div>
            <div class="container-fluid">
                {{ module('breadcrumb') }}
            </div>
        </header>
        <main class="body main flex-grow-1 px-3">
            <div class="container-fluid content px-0" id="cmscontentcontainer">
                {{ module('contentmodule') }}
            </div>
        </main>

        {{ include('BackendFooter/standard.html.twig') }}

        {% set userLogggedIn = cms_user_logged_in() %}
        {% if userLogggedIn %}
            <script type="text/javascript">
                $(document).ready(function () {
                    saveCMSRegistryEntry('dialogCloseButtonText', '{{ "chameleon_system_core.action.close"|trans|json_encode }}');
                });
            </script>

            <div class="modal" id="processingModal" tabindex="-1" role="dialog" aria-labelledby="processingDialog" aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content">
                        <div class="alert alert-warning mb-0" role="alert">
                            <div class="lds-ring float-left mr-1">
                                <div></div>
                                <div></div>
                                <div></div>
                                <div></div>
                            </div>
                            <div class="pt-2">
                                <strong><?= nl2br(TGlobal::Translate('chameleon_system_core.text.wait')); ?></strong></div>
                        </div>
                    </div>
                </div>
            </div>

            <script src="{{ static_url_to_weblib('/javascript/pnotify-3.2.0/pnotify.custom.min.js') }}" type="text/javascript"></script>
            <link href="{{ static_url_to_weblib('/javascript/pnotify-3.2.0/pnotify.custom.min.css') }}" rel="stylesheet"/>
            <script src="{{ static_url_to_weblib('/bootstrap/js/bootstrap.bundle.min.js?v4.1.3') }}" type="text/javascript"></script>
            <script src="{{ static_url_to_weblib('/components/bootstrap3-typeahead/bootstrap3-typeahead.min.js') }}" type="text/javascript"></script>
            <script src="{{ static_url_to_weblib('/javascript/jquery/jquery-form-4.2.2/jquery.form.min.js') }}" type="text/javascript"></script>
            <script src="{{ static_url_to_weblib('/javascript/cms.v1.js') }}" type="text/javascript"></script>
            {# Scrollbar JS needs to be loaded before CoreUI #}
            <script src="{{ path_theme() }}/coreui/js/coreui.bundle.js?v43" type="text/javascript"></script>
            <script src="{{ path_theme() }}/coreui/js/coreui-utilities.min.js" type="text/javascript"></script>
            <script src="{{ path_theme() }}/coreui/js/simplebar.js" type="text/javascript"></script>
        {% endif %}
    </div>
{% endblock %}
